---
title: Tools Reference
description: Complete reference for all MCP tools exposed by the memories.sh server.
---

The memories.sh MCP server exposes 9 core memory tools. The local CLI MCP server (`memories serve`) also adds 6 reminder tools.

<Callout>
SaaS apps that already call SDK endpoints (`/api/sdk/v1/*`) do not need these MCP tools unless they serve MCP-native clients.
</Callout>

Scope model for MCP arguments:

- `tenant_id` = AI SDK Project (security/database boundary)
- `user_id` = end-user scope inside `tenant_id`
- `project_id` = optional repo context filter (not auth boundary)

## get_context

The primary tool for AI agents. Returns all active rules (with path and category metadata) plus memories relevant to an optional search query.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `query` | `string` | No | Search query to find relevant memories |
| `project_id` | `string` | No | Project identifier (e.g., `github.com/user/repo`) as an optional repo context filter |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |
| `limit` | `number` | No | Max memories to return (default: 5) |

```json
{
  "name": "get_context",
  "arguments": {
    "query": "authentication flow",
    "project_id": "github.com/user/repo",
    "limit": 5
  }
}
```

Returns all rules first (including path scope and category when set), followed by relevant search results. Uses FTS5 with BM25 ranking for the search query, falling back to LIKE matching for databases without FTS support. When hybrid graph retrieval is enabled, semantically similar memories may be added via graph `similar_to` edges, and conflict/refinement links may be traversed via `contradicts` / `supersedes` edges when LLM extraction is enabled.

If returned memories include contradiction links, the response also includes a `conflicts[]` array with pair IDs, confidence, explanation text, and a suggestion for clarification.

## add_memory

Store a new memory with optional metadata, path scoping, and categorization.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `content` | `string` | Yes | Memory content |
| `type` | `enum` | No | `rule`, `decision`, `fact`, `note`, `skill` (default: `note`) |
| `tags` | `string[]` | No | Array of tags |
| `project_id` | `string` | No | Optional project/repo context filter (omit for global) |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |
| `paths` | `string[]` | No | Glob patterns for path-scoped rules |
| `category` | `string` | No | Grouping key (becomes rule filename or skill directory) |
| `metadata` | `object` | No | Extended attributes (JSON object, primarily for skills) |

```json
{
  "name": "add_memory",
  "arguments": {
    "content": "Use RESTful naming conventions for all endpoints",
    "type": "rule",
    "paths": ["src/api/**", "src/routes/**"],
    "category": "api"
  }
}
```

Adding a skill:

```json
{
  "name": "add_memory",
  "arguments": {
    "content": "## Deploy\n\n1. Run tests\n2. Build\n3. Deploy to production",
    "type": "skill",
    "category": "deploy",
    "metadata": {
      "name": "deploy",
      "description": "Deploy the application to production"
    }
  }
}
```

## search_memories

Full-text search across memories with BM25 ranking. Uses FTS5 when available, falling back to LIKE matching.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `query` | `string` | Yes | Search query |
| `project_id` | `string` | No | Optional project/repo context filter |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |
| `type` | `enum` | No | Filter by memory type: `rule`, `decision`, `fact`, `note`, `skill` |
| `limit` | `number` | No | Max results (default: 10) |

```json
{
  "name": "search_memories",
  "arguments": {
    "query": "database schema",
    "project_id": "github.com/user/repo",
    "type": "decision"
  }
}
```

## get_rules

Get all active rules, split by global and project scope.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `project_id` | `string` | No | Optional project/repo context filter |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |

```json
{
  "name": "get_rules",
  "arguments": {
    "project_id": "github.com/user/repo"
  }
}
```

## list_memories

List recent memories with optional filters.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `type` | `enum` | No | Filter by type: `rule`, `decision`, `fact`, `note`, `skill` |
| `tags` | `string` | No | Filter by tag (substring match — `"test"` also matches `"testing"`) |
| `project_id` | `string` | No | Optional project/repo context filter |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |
| `limit` | `number` | No | Max results (default: 20) |

## edit_memory

Update an existing memory's content, type, tags, path scope, or category.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | `string` | Yes | Memory ID |
| `content` | `string` | No | New content |
| `type` | `enum` | No | New type (`rule`, `decision`, `fact`, `note`, `skill`) |
| `tags` | `string[]` | No | New tags |
| `paths` | `string[]` | No | New glob patterns for path scoping |
| `category` | `string` | No | New grouping key |
| `metadata` | `object` | No | New extended attributes |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |

```json
{
  "name": "edit_memory",
  "arguments": {
    "id": "abc123def456",
    "paths": ["src/api/**"],
    "category": "api"
  }
}
```

## forget_memory

Soft-delete a memory by ID.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | `string` | Yes | Memory ID to forget |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |

## bulk_forget_memories

Bulk soft-delete memories matching filters. Use `dry_run: true` to preview what would be deleted before committing.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `types` | `string[]` | No | Filter by memory types (`rule`, `decision`, `fact`, `note`, `skill`) |
| `tags` | `string[]` | No | Filter by tags (substring match — `"test"` also matches `"testing"`) |
| `older_than_days` | `integer` | No | Delete memories older than N days (must be >= 1) |
| `pattern` | `string` | No | Content pattern match (`*` = any chars, `?` = single char; matches anywhere in content) |
| `project_id` | `string` | No | Filter by project identifier |
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |
| `all` | `boolean` | No | Delete all memories (cannot combine with other filters) |
| `dry_run` | `boolean` | No | Preview matching memories without deleting (default: false) |

Provide at least one filter (`types`, `tags`, `older_than_days`, or `pattern`), or use `all: true`. The `all` flag cannot be combined with other filters.

```json
{
  "name": "bulk_forget_memories",
  "arguments": {
    "types": ["note", "fact"],
    "older_than_days": 90,
    "dry_run": true
  }
}
```

With `dry_run: true`, returns a preview with `count` and `memories[]` (each with `id`, `type`, `contentPreview`). With `dry_run: false`, returns `count` and `ids[]` of deleted memories. Deletes are batched in groups of 500.

## vacuum_memories

Permanently purge all soft-deleted memories to reclaim storage space. This hard-deletes every row where `deleted_at IS NOT NULL`.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `user_id` | `string` | No | End-user scope identifier inside `tenant_id` |
| `tenant_id` | `string` | No | AI SDK Project identifier for security/database routing |

```json
{
  "name": "vacuum_memories",
  "arguments": {}
}
```

Returns `purged` (count of permanently removed records) and a `message` string.

## Local CLI Reminder Tools

<Callout type="info">
The reminder tools below are available in the local CLI MCP server (`memories serve`). They are not part of hosted tenant-routed MCP today.
</Callout>

### add_reminder

Create a cron-based reminder.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `cron_expression` | `string` | Yes | 5-field cron expression (`minute hour day-of-month month day-of-week`) |
| `message` | `string` | Yes | Reminder message |
| `global` | `boolean` | No | Store as global reminder |
| `project_id` | `string` | No | Explicit project identifier |

### list_reminders

List reminders in current scope.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `include_disabled` | `boolean` | No | Include disabled reminders |
| `project_id` | `string` | No | Explicit project identifier |

### run_due_reminders

Evaluate and emit due reminders.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `dry_run` | `boolean` | No | Preview due reminders without advancing schedule |
| `project_id` | `string` | No | Explicit project identifier |

### enable_reminder

Enable a reminder and recompute `next_trigger_at`.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | `string` | Yes | Reminder ID |

### disable_reminder

Disable a reminder without deleting it.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | `string` | Yes | Reminder ID |

### delete_reminder

Delete a reminder by ID.

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | `string` | Yes | Reminder ID |
